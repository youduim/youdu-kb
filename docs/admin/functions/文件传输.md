# 文件传输逻辑说明

#### 1.概述

- 文件传输功能为了实现有度即时通客户端之间的文件收发。

- 文件传输有两种，分别为离线文件传输和超大文件传输，离线文件和超大文件传输大小的限制，可以在有度管理后台进行设置，【有度管理后台】-【我的企业】-【聊天管理】-【文件传输限制】。


#### 2.实现逻辑说明

##### 2.1.拓扑图

![1581922758376](./\img\文件传输.png)

##### 2.2.实现逻辑

- 如果超大文件大小限制小于离线文件的大小限制，则只能发送离线文件，不能发送大文件；如果两者都设置为0，则客户端不能发送文件。 
- 发送离线文件时，发送方将文件上传到有度服务器，接收方从有度服务器下载，文件在服务器端会备份。 
- 发送超大文件时，如果PC端之间可直连，则通过P2P直传大文件；如果PC端之间不能直连（比如不在同一网段），则通过服务器透传，透 传完成后，服务器端不保留文件。 
- 超大文件只支持同时在线的单人会话传输，手机端不支持收发超大文件。